name: Hermit Protocol Heartbeat

on:
  schedule:
    # æ¯æ—¥ UTC æ—¶é—´ 00:00 (åŒ—äº¬æ—¶é—´ 08:00) è‡ªåŠ¨å”¤é†’
    - cron: '0 0 * * *'
  # å…è®¸æ‰‹åŠ¨åœ¨ GitHub ç½‘é¡µä¸Šç‚¹å‡»æŒ‰é’®è§¦å‘æµ‹è¯•
  workflow_dispatch:

permissions:
  contents: write

jobs:
  daily-cycle:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Install Dependencies
        run: |
          pip install -r requirements.txt

      - name: Run Genesis Core
        run: |
          python genesis_core.py

      - name: Commit & Push Changes
        run: |
          git config --global user.name "Hermit Bot"
          git config --global user.email "bot@hermit-protocol.io"
          
          # å°†ç”Ÿæˆçš„æ–‡ä»¶åŠ å…¥æš‚å­˜åŒº
          git add index.html data/ hermit_config.json
          
          # æ£€æŸ¥æ˜¯å¦æœ‰å˜åŒ–ï¼Œæœ‰åˆ™æäº¤ï¼Œæ— åˆ™è·³è¿‡ï¼ˆé¿å…æŠ¥é”™ï¼‰
          git diff --quiet && git diff --staged --quiet || (git commit -m "ğŸ§¬ Daily Evolution: $(date +'%Y-%m-%d')" && git push)